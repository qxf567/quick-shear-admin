(function(a){if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fileupload-process"],a)}else{a(window.jQuery)}}(function(a){a.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:true,acceptFileTypes:"@acceptFileTypes",maxFileSize:"@maxFileSize",minFileSize:"@minFileSize",maxNumberOfFiles:"@maxNumberOfFiles",disabled:"@disableValidation"});a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{getNumberOfFiles:a.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(g,c){if(c.disabled){return g}var b=a.Deferred(),f=this.options,d=g.files[g.index],e=f.getNumberOfFiles();if(e&&a.type(c.maxNumberOfFiles)==="number"&&e+g.files.length>c.maxNumberOfFiles){d.error=f.i18n("maxNumberOfFiles")}else{if(c.acceptFileTypes&&!(c.acceptFileTypes.test(d.type)||c.acceptFileTypes.test(d.name))){d.error=f.i18n("acceptFileTypes")}else{if(c.maxFileSize&&d.size>c.maxFileSize){d.error=f.i18n("maxFileSize")}else{if(a.type(d.size)==="number"&&d.size<c.minFileSize){d.error=f.i18n("minFileSize")}else{delete d.error}}}}if(d.error||g.files.error){g.files.error=true;b.rejectWith(this,[g])}else{b.resolveWith(this,[g])}return b.promise()}}})}));